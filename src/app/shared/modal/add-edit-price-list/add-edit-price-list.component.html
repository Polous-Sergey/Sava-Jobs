<div class="main">

    <div fxLayout="row" fxLayoutAlign="space-between none">
        <h1 mat-dialog-title>Add price list</h1>
        <button mat-button style="height: 36px" (click)="addEditPriceListCategory()">Add category</button>
    </div>

    <div mat-dialog-content>

        <mat-form-field>
            <input placeholder="Model" matInput [(ngModel)]="priceList.model">
        </mat-form-field>

        <div class="category-container">
            <div class="category-item">
                <div fxLayout="row" fxLayoutAlign="space-between none">
                    <h5 class="category-name">Top items</h5>
                    <button (click)="addEditPriceListItem(-1)" mat-icon-button>
                        <mat-icon aria-label="Example icon-button with a heart icon">add</mat-icon>
                    </button>
                </div>
                <div class="price-list-item" *ngFor="let item of priceList.topItems let itemIndex = index">
                    <mat-divider *ngIf="itemIndex"></mat-divider>
                    <div fxLayout="row" fxLayoutAlign="space-between none">
                        <div>
                            <div class="title">{{item.title}}</div>
                            <div class="subtitle">{{item.subTitle}}</div>
                            <div class="price">Price: {{item.price}}</div>
                        </div>
                        <div fxLayoutAlign=" center">
                            <button (click)="addEditPriceListItem(-1, itemIndex)" mat-icon-button>
                                <mat-icon aria-label="Example icon-button with a heart icon">edit</mat-icon>
                            </button>
                            <button (click)="deletePriceListItem(-1, itemIndex)" mat-icon-button>
                                <mat-icon aria-label="Example icon-button with a heart icon">delete</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-item" *ngFor="let category of priceList.categories let categoryIndex = index">
                <div fxLayout="row" fxLayoutAlign="space-between none">
                    <h5 class="category-name">{{category.name}}</h5>
                    <div>
                        <button (click)="addEditPriceListItem(categoryIndex)" mat-icon-button>
                            <mat-icon aria-label="Example icon-button with a heart icon">add</mat-icon>
                        </button>
                        <button (click)="addEditPriceListCategory(categoryIndex)" mat-icon-button>
                            <mat-icon aria-label="Example icon-button with a heart icon">edit</mat-icon>
                        </button>
                        <button (click)="deletePriceListCategory(categoryIndex)" mat-icon-button>
                            <mat-icon aria-label="Example icon-button with a heart icon">delete</mat-icon>
                        </button>
                    </div>
                </div>
                <div class="price-list-item" *ngFor="let item of category.items let itemIndex = index">
                    <mat-divider *ngIf="itemIndex"></mat-divider>
                    <div fxLayout="row" fxLayoutAlign="space-between none">
                        <div>
                            <div class="title">{{item.title}}</div>
                            <div class="subtitle">{{item.subTitle}}</div>
                            <div class="price">Price: {{item.price}}</div>
                        </div>
                        <div fxLayoutAlign=" center">
                            <button (click)="addEditPriceListItem(categoryIndex, itemIndex)" mat-icon-button>
                                <mat-icon aria-label="Example icon-button with a heart icon">edit</mat-icon>
                            </button>
                            <button (click)="deletePriceListItem(categoryIndex, itemIndex)" mat-icon-button>
                                <mat-icon aria-label="Example icon-button with a heart icon">delete</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="hidden">
            <input type="file"
                   (change)="onImageSelected($event)"
                   #imageInput>
            <input type="file"
                   (change)="onListImageSelected($event)"
                   #listImageInput>
        </div>


        <div class="image-title">
            <div fxFlex="50%">
                <h6>Main image</h6>
            </div>
            <div fxFlex="50%">
                <h6>List image</h6>
            </div>
        </div>

        <div class="images-container">

            <div fxFlex="50%" class="image-item-container" fxLayoutAlign=" center">

                <div class="image-item" *ngIf="previewImage">
                    <img [src]="previewImage" width="100%">
                    <button mat-icon-button (click)="imageInput.click()">
                        <mat-icon aria-label="Delete">autorenew</mat-icon>
                    </button>
                </div>

                <div class="addImageContainer" *ngIf="!previewImage">
                    <div class="addImage" fxLayoutAlign="center center">
                        <button mat-icon-button (click)="imageInput.click()">
                            <mat-icon aria-label="Add image">add</mat-icon>
                        </button>
                    </div>
                </div>

            </div>

            <div fxFlex="50%" class="image-item-container" fxLayoutAlign=" center">

                <div class="image-item" *ngIf="previewlistImage">
                    <img [src]="previewlistImage" width="100%">
                    <button mat-icon-button (click)="listImageInput.click()">
                        <mat-icon aria-label="Delete">autorenew</mat-icon>
                    </button>
                </div>

                <div class="addImageContainer" *ngIf="!previewlistImage">
                    <div class="addImage" fxLayoutAlign="center center">
                        <button mat-icon-button (click)="listImageInput.click()">
                            <mat-icon aria-label="Add image">add</mat-icon>
                        </button>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">
        <button mat-button color="primary" (click)="closeClick()">Cancel</button>
        <button mat-button color="primary" (click)="submitClick()">Submit</button>
    </div>
</div>

